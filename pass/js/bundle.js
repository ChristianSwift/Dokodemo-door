var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function c(t){t.forEach(e)}function r(t){return"function"==typeof t}function o(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function i(t,e){t.appendChild(e)}function l(t,e,n){t.insertBefore(e,n||null)}function s(t){t.parentNode.removeChild(t)}function u(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function a(t){return document.createElement(t)}function f(t){return document.createTextNode(t)}function p(){return f(" ")}function d(){return f("")}function m(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function g(t,e){e=""+e,t.data!==e&&(t.data=e)}let h;function $(t){h=t}const k=[],x=[],b=[],y=[],w=Promise.resolve();let C=!1;function T(t){b.push(t)}let S=!1;const N=new Set;function _(){if(!S){S=!0;do{for(let t=0;t<k.length;t+=1){const e=k[t];$(e),v(e.$$)}for(k.length=0;x.length;)x.pop()();for(let t=0;t<b.length;t+=1){const e=b[t];N.has(e)||(N.add(e),e())}b.length=0}while(k.length);for(;y.length;)y.pop()();C=!1,S=!1,N.clear()}}function v(t){if(null!==t.fragment){t.update(),c(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(T)}}const L=new Set;let O;function B(t,e){t&&t.i&&(L.delete(t),t.i(e))}function J(t,e,n,c){if(t&&t.o){if(L.has(t))return;L.add(t),O.c.push(()=>{L.delete(t),c&&(n&&t.d(1),c())}),t.o(e)}}function A(t){t&&t.c()}function D(t,n,o){const{fragment:i,on_mount:l,on_destroy:s,after_update:u}=t.$$;i&&i.m(n,o),T(()=>{const n=l.map(e).filter(r);s?s.push(...n):c(n),t.$$.on_mount=[]}),u.forEach(T)}function E(t,e){const n=t.$$;null!==n.fragment&&(c(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function F(t,e){-1===t.$$.dirty[0]&&(k.push(t),C||(C=!0,w.then(_)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function I(e,r,o,i,l,u,a=[-1]){const f=h;$(e);const p=r.props||{},d=e.$$={fragment:null,ctx:null,props:u,update:t,not_equal:l,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(f?f.$$.context:[]),callbacks:n(),dirty:a};let m=!1;if(d.ctx=o?o(e,p,(t,n,...c)=>{const r=c.length?c[0]:n;return d.ctx&&l(d.ctx[t],d.ctx[t]=r)&&(d.bound[t]&&d.bound[t](r),m&&F(e,t)),n}):[],d.update(),m=!0,c(d.before_update),d.fragment=!!i&&i(d.ctx),r.target){if(r.hydrate){const t=function(t){return Array.from(t.childNodes)}(r.target);d.fragment&&d.fragment.l(t),t.forEach(s)}else d.fragment&&d.fragment.c();r.intro&&B(e.$$.fragment),D(e,r.target,r.anchor),_()}$(f)}class R{$destroy(){E(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}function U(t,e,n){const c=t.slice();return c[2]=e[n].Name,c[3]=e[n].Value,c}function j(t){let e,n,c,r,o,u,d,m,h,$=t[2]+"",k=t[3]+"";return{c(){e=a("hstack"),n=a("b"),c=f($),r=p(),o=a("spacer"),u=p(),d=a("span"),m=f(k),h=p()},m(t,s){l(t,e,s),i(e,n),i(n,c),i(e,r),i(e,o),i(e,u),i(e,d),i(d,m),i(e,h)},p(t,e){1&e&&$!==($=t[2]+"")&&g(c,$),1&e&&k!==(k=t[3]+"")&&g(m,k)},d(t){t&&s(e)}}}function H(e){let n,c,r=e[0],o=[];for(let t=0;t<r.length;t+=1)o[t]=j(U(e,r,t));return{c(){n=a("section"),c=a("list");for(let t=0;t<o.length;t+=1)o[t].c();m(c,"spacing","xs")},m(t,e){l(t,n,e),i(n,c);for(let t=0;t<o.length;t+=1)o[t].m(c,null)},p(t,[e]){if(1&e){let n;for(r=t[0],n=0;n<r.length;n+=1){const i=U(t,r,n);o[n]?o[n].p(i,e):(o[n]=j(i),o[n].c(),o[n].m(c,null))}for(;n<o.length;n+=1)o[n].d(1);o.length=r.length}},i:t,o:t,d(t){t&&s(n),u(o,t)}}}function V(t,e,n){let c,{ticket:r}=e;return t.$set=t=>{"ticket"in t&&n(1,r=t.ticket)},t.$$.update=()=>{2&t.$$.dirty&&n(0,c=JSON.parse(r.ExtraData))},[c,r]}class q extends R{constructor(t){super(),I(this,t,V,H,o,{ticket:1})}}function M(e){let n,c,r,o,u,d,m,h,$=new Date(e[0].CreatedAt).toLocaleString()+"",k=new Date(e[0].UpdatedAt).toLocaleString()+"";return{c(){n=a("section"),c=a("p"),r=f("申请于 "),o=f($),u=p(),d=a("p"),m=f("最后更新于 "),h=f(k)},m(t,e){l(t,n,e),i(n,c),i(c,r),i(c,o),i(n,u),i(n,d),i(d,m),i(d,h)},p(t,[e]){1&e&&$!==($=new Date(t[0].CreatedAt).toLocaleString()+"")&&g(o,$),1&e&&k!==(k=new Date(t[0].UpdatedAt).toLocaleString()+"")&&g(h,k)},i:t,o:t,d(t){t&&s(n)}}}function P(t,e,n){let{ticket:c}=e;return t.$set=t=>{"ticket"in t&&n(0,c=t.ticket)},[c]}class z extends R{constructor(t){super(),I(this,t,P,M,o,{ticket:0})}}function G(t){let e,n,c,r,o=t[0].Custom.TicketButtonText+"";return{c(){e=a("section"),n=a("a"),c=f(o),m(n,"href",r=t[0].Custom.TicketButtonLink),m(n,"class","btn")},m(t,r){l(t,e,r),i(e,n),i(n,c)},p(t,e){1&e&&o!==(o=t[0].Custom.TicketButtonText+"")&&g(c,o),1&e&&r!==(r=t[0].Custom.TicketButtonLink)&&m(n,"href",r)},d(t){t&&s(e)}}}function K(e){let n,c=e[0].Custom&&e[0].Custom.TicketButtonText&&e[0].Custom.TicketButtonLink&&G(e);return{c(){c&&c.c(),n=d()},m(t,e){c&&c.m(t,e),l(t,n,e)},p(t,[e]){t[0].Custom&&t[0].Custom.TicketButtonText&&t[0].Custom.TicketButtonLink?c?c.p(t,e):(c=G(t),c.c(),c.m(n.parentNode,n)):c&&(c.d(1),c=null)},i:t,o:t,d(t){c&&c.d(t),t&&s(n)}}}function Q(t,e,n){let c,{ticket:r}=e;return t.$set=t=>{"ticket"in t&&n(1,r=t.ticket)},t.$$.update=()=>{2&t.$$.dirty&&n(0,c=JSON.parse(r.Snapshot))},[c,r]}class W extends R{constructor(t){super(),I(this,t,Q,K,o,{ticket:1})}}function X(t,e,n){const c=t.slice();return c[5]=e[n],c[4]=n,c}function Y(t,e,n){const c=t.slice();return c[2]=e[n],c[4]=n,c}function Z(e){let n;return{c(){n=a("span"),n.textContent="< 空 >"},m(t,e){l(t,n,e)},p:t,d(t){t&&s(n)}}}function tt(t){let e;function n(t,e){return"signature"===t[1].Form[t[4]].ItemType||"image"===t[1].Form[t[4]].ItemType?ct:"multiimage"===t[1].Form[t[4]].ItemType?nt:et}let c=n(t),r=c(t);return{c(){r.c(),e=d()},m(t,n){r.m(t,n),l(t,e,n)},p(t,o){c===(c=n(t))&&r?r.p(t,o):(r.d(1),r=c(t),r&&(r.c(),r.m(e.parentNode,e)))},d(t){r.d(t),t&&s(e)}}}function et(t){let e,n,c=t[2]+"";return{c(){e=a("span"),n=f(c)},m(t,c){l(t,e,c),i(e,n)},p(t,e){1&e&&c!==(c=t[2]+"")&&g(n,c)},d(t){t&&s(e)}}}function nt(t){let e,n=t[2],c=[];for(let e=0;e<n.length;e+=1)c[e]=rt(X(t,n,e));return{c(){for(let t=0;t<c.length;t+=1)c[t].c();e=d()},m(t,n){for(let e=0;e<c.length;e+=1)c[e].m(t,n);l(t,e,n)},p(t,r){if(1&r){let o;for(n=t[2],o=0;o<n.length;o+=1){const i=X(t,n,o);c[o]?c[o].p(i,r):(c[o]=rt(i),c[o].c(),c[o].m(e.parentNode,e))}for(;o<c.length;o+=1)c[o].d(1);c.length=n.length}},d(t){u(c,t),t&&s(e)}}}function ct(t){let e,n;return{c(){e=a("img"),e.src!==(n=t[2])&&m(e,"src",n),m(e,"alt","< 图片 >"),m(e,"class","w-full")},m(t,n){l(t,e,n)},p(t,c){1&c&&e.src!==(n=t[2])&&m(e,"src",n)},d(t){t&&s(e)}}}function rt(t){let e,n,c;return{c(){e=a("img"),e.src!==(n=t[5])&&m(e,"src",n),m(e,"alt",c=`< 图片 ${t[4]+1} >`),m(e,"class","w-full")},m(t,n){l(t,e,n)},p(t,c){1&c&&e.src!==(n=t[5])&&m(e,"src",n)},d(t){t&&s(e)}}}function ot(t){let e,n,c,r,o,u=t[1].Form[t[4]].Title+"";function d(t,e){return t[2]?tt:Z}let m=d(t),h=m(t);return{c(){e=a("vstack"),n=a("b"),c=f(u),r=p(),h.c(),o=p()},m(t,s){l(t,e,s),i(e,n),i(n,c),i(e,r),h.m(e,null),i(e,o)},p(t,n){2&n&&u!==(u=t[1].Form[t[4]].Title+"")&&g(c,u),m===(m=d(t))&&h?h.p(t,n):(h.d(1),h=m(t),h&&(h.c(),h.m(e,o)))},d(t){t&&s(e),h.d()}}}function it(e){let n,c,r,o,f=JSON.parse(e[0].InputValue),d=[];for(let t=0;t<f.length;t+=1)d[t]=ot(Y(e,f,t));return{c(){n=a("section"),c=a("h4"),c.textContent="申请材料",r=p(),o=a("list");for(let t=0;t<d.length;t+=1)d[t].c();m(c,"class","card-title"),m(o,"spacing","xs")},m(t,e){l(t,n,e),i(n,c),i(n,r),i(n,o);for(let t=0;t<d.length;t+=1)d[t].m(o,null)},p(t,[e]){if(3&e){let n;for(f=JSON.parse(t[0].InputValue),n=0;n<f.length;n+=1){const c=Y(t,f,n);d[n]?d[n].p(c,e):(d[n]=ot(c),d[n].c(),d[n].m(o,null))}for(;n<d.length;n+=1)d[n].d(1);d.length=f.length}},i:t,o:t,d(t){t&&s(n),u(d,t)}}}function lt(t,e,n){let c,{ticket:r}=e;return t.$set=t=>{"ticket"in t&&n(0,r=t.ticket)},t.$$.update=()=>{1&t.$$.dirty&&n(1,c=JSON.parse(r.Snapshot))},[r,c]}class st extends R{constructor(t){super(),I(this,t,lt,it,o,{ticket:0})}}function ut(t,e,n){const c=t.slice();return c[1]=e[n],c}function at(t){let e,n,c=(t[1]||"< 无 >")+"";return{c(){e=a("p"),n=f(c)},m(t,c){l(t,e,c),i(e,n)},p(t,e){1&e&&c!==(c=(t[1]||"< 无 >")+"")&&g(n,c)},d(t){t&&s(e)}}}function ft(e){let n,c,r,o=JSON.parse(e[0].ReviewRemark),f=[];for(let t=0;t<o.length;t+=1)f[t]=at(ut(e,o,t));return{c(){n=a("section"),c=a("h4"),c.textContent="审核意见",r=p();for(let t=0;t<f.length;t+=1)f[t].c();m(c,"class","card-title")},m(t,e){l(t,n,e),i(n,c),i(n,r);for(let t=0;t<f.length;t+=1)f[t].m(n,null)},p(t,[e]){if(1&e){let c;for(o=JSON.parse(t[0].ReviewRemark),c=0;c<o.length;c+=1){const r=ut(t,o,c);f[c]?f[c].p(r,e):(f[c]=at(r),f[c].c(),f[c].m(n,null))}for(;c<f.length;c+=1)f[c].d(1);f.length=o.length}},i:t,o:t,d(t){t&&s(n),u(f,t)}}}function pt(t,e,n){let{ticket:c}=e;return t.$set=t=>{"ticket"in t&&n(0,c=t.ticket)},[c]}class dt extends R{constructor(t){super(),I(this,t,pt,ft,o,{ticket:0})}}function mt(t){let e,n,c,r,o,u,d,h;return{c(){e=a("vstack"),n=a("div"),r=p(),o=a("span"),o.textContent="凭证码颜色",u=p(),d=a("span"),h=f(t[3]),m(n,"class","h-8 w-8 rounded-full print:hidden"),m(n,"style",c=`background: ${t[3]};`),m(o,"class","text-sm text-gray-500 mt-2"),m(d,"class","hidden print:block"),m(e,"align-y","center"),m(e,"align-x","center")},m(t,c){l(t,e,c),i(e,n),i(e,r),i(e,o),i(e,u),i(e,d),i(d,h)},p(t,e){8&e&&c!==(c=`background: ${t[3]};`)&&m(n,"style",c),8&e&&g(h,t[3])},d(t){t&&s(e)}}}function gt(t){let e,n,c,r,o,u,d,m,h,$,k,x,b,y=t[4].Title+"",w=t[4].SubTitle+"";const C=new q({props:{ticket:t[2]}}),T=new z({props:{ticket:t[2]}}),S=new st({props:{ticket:t[2]}}),N=new dt({props:{ticket:t[2]}}),_=new W({props:{ticket:t[2]}});return{c(){e=a("section"),n=a("vstack"),c=a("b"),r=f(y),o=p(),u=a("span"),d=f(w),m=p(),A(C.$$.fragment),h=p(),A(T.$$.fragment),$=p(),A(S.$$.fragment),k=p(),A(N.$$.fragment),x=p(),A(_.$$.fragment)},m(t,s){l(t,e,s),i(e,n),i(n,c),i(c,r),i(n,o),i(n,u),i(u,d),l(t,m,s),D(C,t,s),l(t,h,s),D(T,t,s),l(t,$,s),D(S,t,s),l(t,k,s),D(N,t,s),l(t,x,s),D(_,t,s),b=!0},p(t,e){(!b||16&e)&&y!==(y=t[4].Title+"")&&g(r,y),(!b||16&e)&&w!==(w=t[4].SubTitle+"")&&g(d,w);const n={};4&e&&(n.ticket=t[2]),C.$set(n);const c={};4&e&&(c.ticket=t[2]),T.$set(c);const o={};4&e&&(o.ticket=t[2]),S.$set(o);const i={};4&e&&(i.ticket=t[2]),N.$set(i);const l={};4&e&&(l.ticket=t[2]),_.$set(l)},i(t){b||(B(C.$$.fragment,t),B(T.$$.fragment,t),B(S.$$.fragment,t),B(N.$$.fragment,t),B(_.$$.fragment,t),b=!0)},o(t){J(C.$$.fragment,t),J(T.$$.fragment,t),J(S.$$.fragment,t),J(N.$$.fragment,t),J(_.$$.fragment,t),b=!1},d(t){t&&s(e),t&&s(m),E(C,t),t&&s(h),E(T,t),t&&s($),E(S,t),t&&s(k),E(N,t),t&&s(x),E(_,t)}}}function ht(e){let n,c,r;return{c(){n=a("section"),c=a("b"),r=f(e[1]),m(n,"class","status-card")},m(t,e){l(t,n,e),i(n,c),i(c,r)},p(t,e){2&e&&g(r,t[1])},i:t,o:t,d(t){t&&s(n)}}}function $t(e){let n;return{c(){n=a("section"),n.innerHTML="<b>载入中……</b>",m(n,"class","status-card")},m(t,e){l(t,n,e)},p:t,i:t,o:t,d(t){t&&s(n)}}}function kt(t){let e,n,r,o,u,f,d,g,h,$,k,x,b,y,w,C,T,S,N=t[3]&&mt(t);const _=[$t,ht,gt],v=[];function L(t,e){return t[0]?0:t[1]?1:2}return x=L(t),b=v[x]=_[x](t),{c(){e=a("main"),n=a("section"),r=a("hstack"),o=a("img"),f=p(),d=a("h1"),d.textContent="杭电助手 凭证",g=p(),h=a("spacer"),$=p(),N&&N.c(),k=p(),b.c(),y=p(),w=a("p"),w.textContent="由杭电助手提供技术支持",C=p(),T=a("p"),T.textContent=`\n    本打印副本生成于${(new Date).toString()}`,m(o,"class","logo"),o.src!==(u="/img/icon.png")&&m(o,"src","/img/icon.png"),m(o,"alt","HDUHelp Logo"),m(w,"class","text-center text-white print:text-black"),m(T,"class","text-center hidden print:block"),m(e,"class","container")},m(t,c){l(t,e,c),i(e,n),i(n,r),i(r,o),i(r,f),i(r,d),i(r,g),i(r,h),i(r,$),N&&N.m(r,null),i(e,k),v[x].m(e,null),i(e,y),i(e,w),i(e,C),i(e,T),S=!0},p(t,[n]){t[3]?N?N.p(t,n):(N=mt(t),N.c(),N.m(r,null)):N&&(N.d(1),N=null);let o=x;x=L(t),x===o?v[x].p(t,n):(O={r:0,c:[],p:O},J(v[o],1,1,()=>{v[o]=null}),O.r||c(O.c),O=O.p,b=v[x],b||(b=v[x]=_[x](t),b.c()),B(b,1),b.m(e,y))},i(t){S||(B(b),S=!0)},o(t){J(b),S=!1},d(t){t&&s(e),N&&N.d(),v[x].d()}}}function xt(t,e,n){const c=new URLSearchParams(window.location.search).get("id");let r=!0,o="",i={},l="#fff",s={},u={};return fetch(`https://api.hduhelp.com/workflow/ticket/detail?ticket=${c}`).then(async t=>{if(!t.ok)return n(1,o="发生错误，可能是过期或无效的凭证。"),void n(0,r=!1);let e=(await t.json()).data;n(2,i=e.detail),n(3,l=e.qrCodeColor),n(4,s=JSON.parse(i.Snapshot)),u=JSON.parse(i.ExtraData),n(0,r=!1)}).catch(()=>{n(1,o="网络错误，请尝试重新连接网络。"),n(0,r=!1)}),[r,o,i,l,s]}return new class extends R{constructor(t){super(),I(this,t,xt,kt,o,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
